"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const womAsync_module_1 = __importDefault(require("../wrappers/womAsync.module"));
const maxwhere_1 = require("maxwhere");
const index_1 = __importDefault(require("../gizmo/index"));
const axeshelper_1 = __importDefault(require("..//helper/axeshelper"));
const gridHelper_1 = __importDefault(require("..//helper/gridHelper"));
let boundingBox;
let section = geBoundingBoxSection();
/**
 * Power-up is a set of useful utilities to use during development.
 * Functionalities:
 *   - nodeInfo:  Ctrl + left click on a mesh will show it's bounding box and basic info is shown on a label and also logs to the F6 dev console
 *   - (camera)stepper: Animate camera movement between defined camera positions and orientations.
 *      - O - add step
 *      - L - step forward
 *      - K - step backwards
 *      - M - increase animation duration
 *      - N - decrease animation duration
 * @param config
 */
function init(config) {
    if (config) {
        if (config.stepper) {
            stepper();
        }
        if (config.nodeInfo) {
            initNodeInfo(config.nodeInfo);
        }
        if (config.gizmo) {
            let gizmo = new index_1.default({
                snap: {
                    isKeyActive: false,
                },
            });
            if (config.axesHelper) {
                let axesHelper = new axeshelper_1.default(10000);
            }
            if (config.axesHelper) {
                let gridHelper = new gridHelper_1.default(10000, 100, true);
            }
        }
    }
    else {
        stepper();
        initNodeInfo({ bbox: true, log: true });
        let gizmo = new index_1.default({
            snap: {
                isKeyActive: false,
            },
        });
        let axesHelper = new axeshelper_1.default(10000);
        let gridHelper = new gridHelper_1.default(10000, 100, true);
    }
}
function initNodeInfo(config) {
    womAsync_module_1.default.selfAwareListener('click', (event) => {
        if (event.target.includes('_physical') && event.ctrlKey) {
            let id = event.target.replace('_physical', '');
            let target = maxwhere_1.wom.select(`#${id}`);
            if (config.log) {
                womAsync_module_1.default.log(getNodeInfo(target));
            }
            if (config.bbox) {
                showBoundingBox(target);
            }
        }
    }, maxwhere_1.wom);
}
function showBoundingBox(target) {
    if (boundingBox || !target) {
        boundingBox.clear();
        boundingBox = null;
    }
    {
        boundingBox = maxwhere_1.wom.create('manualvisual', {
            //@ts-ignore
            position: target.entity.GetAABB().center,
            //@ts-ignore
            scale: target.entity.GetAABB().size,
            sections: [section],
        });
        let label = maxwhere_1.wom.create('label', {
            autorotate: true,
            caption: getNodeInfo(target),
            charheight: 0.24,
            color: { r: 0, g: 0, b: 0 },
            background: {
                enable: true,
                color: { r: 1, g: 1, b: 1 },
            },
            ontop: true,
        });
        boundingBox.add(label);
        //wom.render(boundingBox);
        target.render(boundingBox);
    }
}
function geBoundingBoxSection() {
    let points = [
        { x: -0.5, y: -0.5, z: 0.5 },
        { x: 0.5, y: -0.5, z: 0.5 },
        { x: 0.5, y: 0.5, z: 0.5 },
        { x: -0.5, y: 0.5, z: 0.5 },
        { x: -0.5, y: -0.5, z: -0.5 },
        { x: 0.5, y: -0.5, z: -0.5 },
        { x: 0.5, y: 0.5, z: -0.5 },
        { x: -0.5, y: 0.5, z: -0.5 },
    ];
    let color = {
        type: 'color',
        arg: { r: 1, g: 1, b: 0, a: 1 },
    };
    let section = {
        renderop: 'linelist',
        material_name: 'Physics/DebugDraw/VertexDriven',
        geometry: [],
    };
    section.geometry.push({ type: 'position', arg: points[0] }, color, { type: 'position', arg: points[1] }, color);
    section.geometry.push({ type: 'position', arg: points[1] }, color, { type: 'position', arg: points[2] }, color);
    section.geometry.push({ type: 'position', arg: points[2] }, color, { type: 'position', arg: points[3] }, color);
    section.geometry.push({ type: 'position', arg: points[3] }, color, { type: 'position', arg: points[0] }, color);
    section.geometry.push({ type: 'position', arg: points[0] }, color, { type: 'position', arg: points[4] }, color);
    section.geometry.push({ type: 'position', arg: points[1] }, color, { type: 'position', arg: points[5] }, color);
    section.geometry.push({ type: 'position', arg: points[2] }, color, { type: 'position', arg: points[6] }, color);
    section.geometry.push({ type: 'position', arg: points[3] }, color, { type: 'position', arg: points[7] }, color);
    section.geometry.push({ type: 'position', arg: points[4] }, color, { type: 'position', arg: points[5] }, color);
    section.geometry.push({ type: 'position', arg: points[5] }, color, { type: 'position', arg: points[6] }, color);
    section.geometry.push({ type: 'position', arg: points[6] }, color, { type: 'position', arg: points[7] }, color);
    section.geometry.push({ type: 'position', arg: points[7] }, color, { type: 'position', arg: points[4] }, color);
    return section;
}
function getNodeInfo(target) {
    let materials;
    if (target.nodeName == 'instancedmesh') {
        materials = 'cannot read materialis on instancedmesh';
    }
    else {
        materials = target
            .subvisuals()
            .map((subvisual) => subvisual.material.GetName());
    }
    let nodeInfo = {
        id: target.id,
        url: target.url,
        position: target.getPosition(),
        orientation: target.getOrientation(),
        scale: target.getScale(),
        materials: materials,
    };
    return JSON.stringify(nodeInfo, null, '\n');
}
function stepper() {
    let steps = [];
    let currentStep = 0;
    let duration = 7;
    womAsync_module_1.default.selfAwareListener('input-keyboard', (e) => {
        if (e.type == 'keyDown') {
            switch (e.keyName) {
                case 'O':
                    steps.push({
                        pos: maxwhere_1.wom.camera.getPosition(),
                        ori: maxwhere_1.wom.camera.getOrientation(),
                    });
                    womAsync_module_1.default.log(`Step ${steps.length - 1} added.`);
                    break;
                case 'L':
                    if (!maxwhere_1.wom.camera.animating) {
                        if (currentStep == steps.length - 1) {
                            currentStep = 0;
                        }
                        else {
                            currentStep++;
                        }
                        maxwhere_1.wom.camera.animate('position', {
                            to: steps[currentStep].pos,
                            duration: duration,
                        });
                        maxwhere_1.wom.camera.animate('orientation', {
                            to: steps[currentStep].ori,
                            duration: duration,
                        });
                        womAsync_module_1.default.log(`Step ${currentStep} animating.`);
                    }
                    break;
                case 'K':
                    if (!maxwhere_1.wom.camera.animating) {
                        if (currentStep == 0) {
                            currentStep = steps.length - 1;
                        }
                        else {
                            currentStep--;
                        }
                        maxwhere_1.wom.camera.animate('position', {
                            to: steps[currentStep].pos,
                            duration: duration,
                        });
                        maxwhere_1.wom.camera.animate('orientation', {
                            to: steps[currentStep].ori,
                            duration: duration,
                        });
                        womAsync_module_1.default.log(`Step ${currentStep} animating.`);
                    }
                    break;
                case 'N':
                    if (duration != 1) {
                        duration--;
                        womAsync_module_1.default.log(`Duration is set to ${duration} sec.`);
                    }
                    else {
                        womAsync_module_1.default.log(`Duration is already set to ${duration} sec and cannot be lowered.`);
                    }
                    break;
                case 'M':
                    duration++;
                    womAsync_module_1.default.log(`Duration is set to ${duration} sec.`);
                    break;
                default:
                    break;
            }
        }
    }, maxwhere_1.wom);
}
exports.default = {
    init: init,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvcG93ZXJVcC9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLGtGQUFtRDtBQUNuRCx1Q0FXa0I7QUFHbEIsMkRBQW1DO0FBQ25DLHVFQUErQztBQUMvQyx1RUFBK0M7QUFFL0MsSUFBSSxXQUFnQyxDQUFDO0FBQ3JDLElBQUksT0FBTyxHQUFHLG9CQUFvQixFQUFFLENBQUM7QUFFckM7Ozs7Ozs7Ozs7O0dBV0c7QUFDSCxTQUFTLElBQUksQ0FBQyxNQU1iO0lBQ0MsSUFBSSxNQUFNLEVBQUU7UUFDVixJQUFJLE1BQU0sQ0FBQyxPQUFPLEVBQUU7WUFDbEIsT0FBTyxFQUFFLENBQUM7U0FDWDtRQUVELElBQUksTUFBTSxDQUFDLFFBQVEsRUFBRTtZQUNuQixZQUFZLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQy9CO1FBRUQsSUFBSSxNQUFNLENBQUMsS0FBSyxFQUFFO1lBQ2hCLElBQUksS0FBSyxHQUFHLElBQUksZUFBSyxDQUFDO2dCQUNwQixJQUFJLEVBQUU7b0JBQ0osV0FBVyxFQUFFLEtBQUs7aUJBQ25CO2FBQ0YsQ0FBQyxDQUFDO1lBQ0gsSUFBSSxNQUFNLENBQUMsVUFBVSxFQUFFO2dCQUNyQixJQUFJLFVBQVUsR0FBRyxJQUFJLG9CQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDeEM7WUFDRCxJQUFJLE1BQU0sQ0FBQyxVQUFVLEVBQUU7Z0JBQ3JCLElBQUksVUFBVSxHQUFHLElBQUksb0JBQVUsQ0FBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDO2FBQ25EO1NBQ0Y7S0FDRjtTQUFNO1FBQ0wsT0FBTyxFQUFFLENBQUM7UUFDVixZQUFZLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ3hDLElBQUksS0FBSyxHQUFHLElBQUksZUFBSyxD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